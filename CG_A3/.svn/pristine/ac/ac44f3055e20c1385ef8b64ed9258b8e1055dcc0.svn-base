#pragma once

#include "../../OpenGL_headers.h"
#include "../../Utils/glm/glm.hpp"
#include "../../Utils/glm/gtc/matrix_transform.hpp"
#include "../../Utils/glm/gtc/type_ptr.hpp"
#include "../../Utils/glm/gtx/quaternion.hpp"
#include <string>
#include <vector>
#include <iostream>
#include <fstream>

using namespace std;

namespace Rendering
{
	namespace MultiPass
	{
		class ShadowMap
		{
		public:
			ShadowMap();
			~ShadowMap();
			bool Create();

			void addSceneData(vector<GLuint>& vao, vector<unsigned int>& idx_len);

			GLuint getDepthTexture(){ return m_deptTex; }
			glm::mat4 getDepthBiasMVP() { return m_depthBiasMVP; }
			glm::mat4 getDepthMVP() { return m_depthMVP; }

		private:
			GLuint m_shader;
			GLuint m_deptTex;
			GLuint m_frameBuf;

			vector< GLuint > m_vao;
			vector<unsigned int > m_indiciesLength;

			glm::mat4 m_depthBiasMVP;
			glm::mat4 m_depthMVP;

			void Draw();
		};
	}
}